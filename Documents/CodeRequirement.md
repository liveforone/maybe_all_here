## 대전제
* 코드 품질 요구는 [스타일 가이드](https://github.com/liveforone/study/tree/main/%5B%EB%82%98%EB%A7%8C%EC%9D%98%20%EC%8A%A4%ED%83%80%EC%9D%BC%20%EA%B0%80%EC%9D%B4%EB%93%9C%5D)를 기본으로 한다.
* 아래의 요구들은 스타일 가이드 이외, 혹은 중요하게 지켜야할 요구사항들을 설명한다.

## 요구1 : 코드의 스타일은 선언형을 주로 사용하라
* 선언형과 명령형의 차이점은 이를 읽는 독자가 찾길 바란다.
* 코드는 선언형으로 작성 시 코드가 하는 일을 바로바로 알기 쉽다.
* 명령형으로 모든걸 풀어놓기 보단, 더욱 은닉하고 함수만 뽑아 쓰는 선언형으로 프로그래밍하라.

## 요구2 : 문자열을 모두 상수화 시켜라
* 코드에 문자열이 끼는 것은 아주 안좋다.
* 특히 api의 url을 그대로 작성하는 것도 좋은 방법이 아니다.
* 이유는 여럿이 있으나, 가독성/유지보수 측면에서 나쁘기 때문에 지양하도록 한다.
* (static class로 따로 뺀)상수와 ENUM으로 풀어서 문자열을 작성한다.
* 주로 로그나 서버 포트 등은 ENUM으로 작성하고,
* 카프카 토픽이나 url은 상수로 작성한다.

## 요구3 : 외부에 제공하는 api는 따로 빼라
* 외부에 제공하려는 api들은 XxProvideController 라는 클래스로 따로 빼서 작성하도록한다.
* 서비스 내부에서 제공하는 api와 서비스간 통신에만 사용되는 api는 분리해둘 필요가 있다.

## 요구4 : 반복되는 controller response는 하나의 클래스에서 생성하라
* ResponseEntity로 리턴되는 response중에 단순히 ok하고 body를 넘겨주는 GetMapping 이외에,
* Post/Put/Delete 등으로 요청된 경우에는 response가 복잡하다.
* httpstatus 플러스 알파를 전송하기에 코드가 지저분해진다.
* 이를 RestResponse라는 클래스라는 상위 계층을 만들고 그 안에서 작성후 함수를 호출하는 방식으로 사용하면 좋다.

## 요구5 : 더티체킹을 활용하라
* 더티 체킹을 활용하면 불필요한 업데이트 쿼리 메소드를 없앨 수 있다.
* 또한 여기에 도메인 모델 패턴을 적용하면 아름다운 선언형 코드가 탄생한다.
* 더티체킹은 리팩토링 과정에서 추가한 요구사항으로 리팩토링 문서에서 자세히 살펴볼 수 있다.(스타일 가이드에도 기재되어있다.)

## 요구6 : 대량의 데이터를 조회할때에는 dto 프로젝션을 사용하라
* 대량의 데이터를 조회하는 경우가 업데이트나, 삭제 쿼리보다 많다.
* 이러한 대량의 데이터는 특히나 어플리케이션에 많은 부하를 가져온다.
* 따라서 데이터를 최대한 필요한 만큼 추려서 가져오는것이 너무나 중요하다.
* 따라서 dto 프로젝션으로 필요한 만큼의 데이트를 가져오도록한다.

## 요구7 : 검색쿼리는 인덱스를 탈 수 있도록 시작 검색어로 검색하라
* keywork% 쿼리를 날려야 인덱스를 태울 수 있다.
* 따라서 인덱스를 태울 수 있게 쿼리 dsl의 startsWith() 메소드를 활용해 like 쿼리를 날린다.